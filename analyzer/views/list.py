from django.core.paginator import Paginator
from django.shortcuts import render
from django.views import View
from django.conf import settings

from analyzer.models import Overview


class ListView(View):
    def get(self, request, *args, **kwargs):
        analysis = Overview.objects.order_by('-submission_time')
        item_per_page = settings.GLOBAL_SETTINGS['item_per_page']
        paginator = Paginator(analysis, item_per_page)
        page_number = request.GET.get('page')
        page_obj = paginator.get_page(page_number)
        context = {
            'analysis': page_obj,
            'item_per_page': item_per_page
        }
        return render(request, "analyzer/list.html", context=context)
